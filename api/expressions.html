<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html lang="de"> 
  <head> 
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/> 
    <title>Open Object Store</title> 
  	<link rel="stylesheet" type="text/css" href="style.css" />
  </head> 
  <body>
    <div id="header">
      <a href="https://github.com/zussel/oos"><img style="z-order: 10000; float: left; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_green_007200.png" alt="Fork me on GitHub"></a>
      <div id="navigation">
        <h1>OOS</h1>
        <p>Store all your objects in one container</p>
        <ul>
          <li><a href="../index.html">Home</a></li>
          <li class="selected">Documention</li>
          <li><a href="../download.html">Download</a></li>
          <!--li><a href="../contact.html">Contact</a></li-->
          <li><a href="../about.html">About</a></li>
        </ul>
      </div>
    </div>
    <div id="wrapper">
      <div id="content">
        <div>
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="annotated.html"><span>Documentation</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Expressions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"> 
<div class="width75 float_left">
 
<table id="doc_nav"><tbody><tr>
  <td><div class="left-arrow-top"></td>
  <td align="left" width="40%">Prev</td>
  <td align="center" width="20%"></td>
  <td align="right" width="40%">Next</td>
  <td><div class="right-arrow-top"></td></tr><tr>
  <td><div class="left-arrow-bottom"></td>
  <td align="left" width="40%">
 <a class="el" href="view.html">Object Views</a>  
  </td>
  <td width="20%"></td>
  <td align="right" width="40%">
 <a class="el" href="database.html">Database</a>  
  </td><td><div class="right-arrow-bottom"></td>
</tr></tbody></table>
<h1><a class="anchor" id="expression_sec"></a>
Find and Filter Objects</h1>
<p>When working with an <a class="el" href="classoos_1_1object__view.html" title="Create a view for a concrete object type. ">oos::object_view</a> you may want to find a certain object or you want to apply a function only for some of the objects in the view.</p>
<p>To achieve this we can use the <a class="el" href="classoos_1_1object__view.html#ad4af1f9d7064055f3d1f1455f0b7befe">oos::object_view::find_if</a> method or we can use the global <a class="el" href="namespaceoos.html#acd4f890787ea782134f637c02b1b3967" title="Applies a function if element is valid with given predicate. ">for_each_if()</a> function. But how can we define or filter criterium?</p>
<p>First add some elements (persons) to the store and create the view. As you can see we've extended the person class with an age attribute.</p>
<div class="fragment"><div class="line"><span class="comment">// add some persons</span></div>
<div class="line">ostore.<a class="code" href="classoos_1_1object__store.html#a77514ee78979a91d2745f01184371e11">insert</a>(<span class="keyword">new</span> person(<span class="stringliteral">&quot;joe&quot;</span>, 45))</div>
<div class="line">ostore.<a class="code" href="classoos_1_1object__store.html#a77514ee78979a91d2745f01184371e11">insert</a>(<span class="keyword">new</span> person(<span class="stringliteral">&quot;walter&quot;</span>, 56));</div>
<div class="line">ostore.<a class="code" href="classoos_1_1object__store.html#a77514ee78979a91d2745f01184371e11">insert</a>(<span class="keyword">new</span> person(<span class="stringliteral">&quot;helen&quot;</span>, 37));</div>
<div class="line">ostore.<a class="code" href="classoos_1_1object__store.html#a77514ee78979a91d2745f01184371e11">insert</a>(<span class="keyword">new</span> person(<span class="stringliteral">&quot;tim&quot;</span>, 14));</div>
<div class="line">ostore.<a class="code" href="classoos_1_1object__store.html#a77514ee78979a91d2745f01184371e11">insert</a>(<span class="keyword">new</span> person(<span class="stringliteral">&quot;linda&quot;</span>, 25));</div>
<div class="line">ostore.<a class="code" href="classoos_1_1object__store.html#a77514ee78979a91d2745f01184371e11">insert</a>(<span class="keyword">new</span> person(<span class="stringliteral">&quot;lea&quot;</span>, 30));</div>
<div class="line">ostore.<a class="code" href="classoos_1_1object__store.html#a77514ee78979a91d2745f01184371e11">insert</a>(<span class="keyword">new</span> person(<span class="stringliteral">&quot;georg&quot;</span>, 42));</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="classoos_1_1object__view.html" title="Create a view for a concrete object type. ">oos::object_view&lt;person&gt;</a> person_view_t;</div>
<div class="line"><span class="keyword">typedef</span> person_view_t::iterator iterator;</div>
<div class="line"></div>
<div class="line">person_view_t pview(ostore);</div>
</div><!-- fragment --><p>If we want to find the person of age 25 we can achieve this by using the <a class="el" href="classoos_1_1object__view.html#ad4af1f9d7064055f3d1f1455f0b7befe">oos::object_view::find_if</a> method. But first we have to create a variable holding the method of our object which should be used for comparation. Here it is person::age().</p>
<div class="fragment"><div class="line"><span class="comment">// create the variable</span></div>
<div class="line"><a class="code" href="classoos_1_1variable.html" title="Holds the functor to a method. ">oos::variable&lt;int&gt;</a> x(<a class="code" href="namespaceoos.html#a7a419ee9e956cf0407626659139f3e71" title="Create a variable with depth zero. ">oos::make_var</a>(&amp;person::age));</div>
<div class="line"></div>
<div class="line"><span class="comment">// find the person of age 25</span></div>
<div class="line">iterator i = pview.find_if(x == 25);</div>
</div><!-- fragment --><p>The call returns the first occurence of the object matching the expression or the end iterator.</p>
<p>If you want to apply a function to all objects matching a certain expression use <a class="el" href="namespaceoos.html#acd4f890787ea782134f637c02b1b3967" title="Applies a function if element is valid with given predicate. ">oos::for_each_if()</a> and use it in the following described way.</p>
<div class="fragment"><div class="line"><span class="comment">// print all persons with age between 20 and 60 years</span></div>
<div class="line"><span class="keywordtype">void</span> print(<span class="keyword">const</span> person_ptr &amp;p)</div>
<div class="line">{</div>
<div class="line">  std::cout &lt;&lt; p-&gt;name() &lt;&lt; <span class="stringliteral">&quot; is between 40 and 60.\n&quot;</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// declare a variable/literal for the age</span></div>
<div class="line"><a class="code" href="classoos_1_1variable.html" title="Holds the functor to a method. ">oos::variable&lt;int&gt;</a> x(<a class="code" href="namespaceoos.html#a7a419ee9e956cf0407626659139f3e71" title="Create a variable with depth zero. ">oos::make_var</a>(&amp;person::age));</div>
<div class="line"></div>
<div class="line"><span class="comment">// use the for_each_if function</span></div>
<div class="line"><a class="code" href="namespaceoos.html#acd4f890787ea782134f637c02b1b3967" title="Applies a function if element is valid with given predicate. ">for_each_if</a>(pview.begin(), pview.end(), x &gt; 20 &amp;&amp; x &lt; 60, print);</div>
</div><!-- fragment --><p>All persons whos age lays between 40 and 60 are printed.</p>
 
<table id="doc_nav"><tbody><tr>
  <td><div class="left-arrow-top"></td>
  <td align="left" width="40%">Prev</td>
  <td align="center" width="20%"></td>
  <td align="right" width="40%">Next</td>
  <td><div class="right-arrow-top"></td></tr><tr>
  <td><div class="left-arrow-bottom"></td>
  <td align="left" width="40%">
 <a class="el" href="view.html">Object Views</a>  
  </td>
  <td width="20%"></td>
  <td align="right" width="40%">
 <a class="el" href="database.html">Database</a>  
  </td><td><div class="right-arrow-bottom"></td>
</tr></tbody></table>
 
</div>
<div id="side_toc" class="width25 float_right">
 <b>Table of content</b> <br/>
 </p>
<ul>
<li>
<a class="el" href="index.html">Overview</a> </li>
<li>
<a class="el" href="objects.html">Objects</a> <ul>
<li>
<a class="el" href="objects.html#step1">Derive from class object</a> </li>
<li>
<a class="el" href="objects.html#step2">Provide access methods</a> </li>
<li>
<a class="el" href="objects.html#step3">Make it serializable</a> </li>
</ul>
</li>
<li>
<a class="el" href="store.html">Object Store</a> <ul>
<li>
<a class="el" href="store.html#prototypes">Setup object hierarchy</a> </li>
<li>
<a class="el" href="store.html#add_objects">Add objects</a> </li>
<li>
<a class="el" href="store.html#modify_objects">Modify objects</a> </li>
<li>
<a class="el" href="store.html#remove_objects">Remove objects</a> </li>
</ul>
</li>
<li>
<a class="el" href="relations.html">Object Relations</a> <ul>
<li>
<a class="el" href="relations.html#one_to_one">OneToOne relations</a> </li>
<li>
<a class="el" href="relations.html#one_to_many">OneToMany relations</a> </li>
</ul>
</li>
<li>
<a class="el" href="view.html">Object Views</a> </li>
<li>
<a class="el" href="expressions.html">Expressions</a> </li>
<li>
<a class="el" href="database.html">Database</a> <ul>
<li>
<a class="el" href="database.html#support_sec">Supported Databases</a> </li>
<li>
<a class="el" href="database.html#db_relation_sec">Relations on Database</a> </li>
</ul>
</li>
</ul>
 
</div>
 </div></div><!-- contents -->
    <div class="clear" id="footer"></div>
  </div>
</body>
</html>
